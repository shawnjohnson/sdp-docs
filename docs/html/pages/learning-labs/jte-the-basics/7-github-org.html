

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Apply to Multiple GitHub Repositories &mdash; Solutions Delivery Platform  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/theme_overrides.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/style.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Summary" href="8-summary.html" />
    <link rel="prev" title="Apply to a GitHub Repository" href="6-multibranch.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> Solutions Delivery Platform
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Components</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://jenkinsci.github.io/templating-engine-plugin">Jenkins Templating Engine</a></li>
<li class="toctree-l1"><a class="reference external" href="https://boozallen.github.io/sdp-libraries">Pipeline Libraries</a></li>
</ul>
<p class="caption"><span class="caption-text">Deployment Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../deployment-guides/openshift/index.html">OpenShift</a></li>
</ul>
<p class="caption"><span class="caption-text">Learning Labs</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../try-it-out/docs/index.html">Try It Out</a></li>
<li class="toctree-l1"><a class="reference internal" href="../local-development/index.html">Local Development</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">JTE: The Basics</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="1-prerequisites.html">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="2-pipeline-job.html">Write the Template</a></li>
<li class="toctree-l2"><a class="reference internal" href="3-first-libraries.html">Create the Libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="4-first-configuration-file.html">Configure the Pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="5-swap-to-gradle.html">Swap Libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="6-multibranch.html">Apply to a GitHub Repository</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Apply to Multiple GitHub Repositories</a></li>
<li class="toctree-l2"><a class="reference internal" href="8-summary.html">Summary</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../jte-primitives/index.html">JTE: Pipeline Primitives</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jte-advanced-features/index.html">JTE: Advanced Features</a></li>
</ul>
<p class="caption"><span class="caption-text">How-To Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../how-to/helm-multitenancy.html">Helm Multitenancy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how-to/add_jenkins_credentials.html">Add Credentials to Jenkins</a></li>
<li class="toctree-l1"><a class="reference external" href="https://help.github.com/articles/creating-a-new-organization-from-scratch/">Create a GitHub Organization</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.twistlock.com/2018/05/08/securing-containers-red-hat-openshift-twistlock-deployment-script/">Deploy Twistlock to OpenShift</a></li>
</ul>
<p class="caption"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contribute-to-docs.html">Contribute to this Documentation!</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Solutions Delivery Platform</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">JTE: The Basics</a> &raquo;</li>
        
      <li>Apply to Multiple GitHub Repositories</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/pages/learning-labs/jte-the-basics/7-github-org.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="apply-to-multiple-github-repositories">
<span id="jte-the-basics-apply-to-multiple-repositories"></span><h1>Apply to Multiple GitHub Repositories<a class="headerlink" href="#apply-to-multiple-github-repositories" title="Permalink to this headline">¶</a></h1>
<p>Next up, we’ll see how to apply the same template to two different
applications that are using different tools.</p>
<p>Let’s walk through how you would setup JTE to this situation where
one application is using maven, the other application is using gradle,
and both applications are using SonarQube.</p>
<div class="section" id="create-a-new-github-repository">
<h2>Create a New GitHub Repository<a class="headerlink" href="#create-a-new-github-repository" title="Permalink to this headline">¶</a></h2>
<p>We already have a pipeline configuration repository that has our pipeline template,
pipeline configuration file, and pipeline libraries as well as a repository
that represents an application using gradle.</p>
<p>Follow the same procedure as before when creating the gradle application’s repository
to create a maven application repository named <code class="docutils literal notranslate"><span class="pre">jte-the-basics-app-maven</span></code>.</p>
</div>
<div class="section" id="modify-the-pipeline-configurations">
<h2>Modify the Pipeline Configurations<a class="headerlink" href="#modify-the-pipeline-configurations" title="Permalink to this headline">¶</a></h2>
<p>Now that there are multiple applications with some configurations that are common
and some configurations that are unique, we need to introduce the concept of
pipeline configuration aggregation.</p>
<div class="section" id="modify-the-governance-tier-configuration-file">
<h3>Modify the Governance Tier Configuration File<a class="headerlink" href="#modify-the-governance-tier-configuration-file" title="Permalink to this headline">¶</a></h3>
<p>We need to edit the pipeline configuration file (<code class="docutils literal notranslate"><span class="pre">pipeline_config.groovy</span></code>) we created
earlier to represent the <strong>common</strong> configurations that will be applied to both apps
and explicitly <em>allow</em> these applications to add their own configurations.</p>
<p><strong>pipeline-configuration/pipeline_config.groovy</strong>:</p>
<div class="code groovy highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">libraries</span><span class="p">{</span>
    <span class="n">merge</span> <span class="o">=</span> <span class="n">true</span>
    <span class="n">sonarqube</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>In this configuration, both applications are using SonarQube.  Since this is
a common configuration, we’ll leave it in the Governance Tier’s configuration file.</p>
<p>The application repositories will each get their own <code class="docutils literal notranslate"><span class="pre">pipeline_config.groovy</span></code> to
indicate if they are using the <code class="docutils literal notranslate"><span class="pre">maven</span></code> or the <code class="docutils literal notranslate"><span class="pre">gradle</span></code> library.</p>
<p class="last">Since we want to allow these apps to add <em>additional</em> configurations, we need to be
explicit about that by setting <code class="docutils literal notranslate"><span class="pre">merge</span> <span class="pre">=</span> <span class="pre">true</span></code> in the <code class="docutils literal notranslate"><span class="pre">libraries</span></code> block of the
pipeline configuration.</p>
</div>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">When aggregating pipeline configurations, JTE applies <em>conditional inheritance</em> during
the aggregation process.  To learn more on conditional inheritance,
<a class="reference external" href="https://jenkinsci.github.io/templating-engine-plugin/pages/Governance/config_file_aggregation.html">read the docs</a>.</p>
</div>
</div>
<div class="section" id="create-a-pipeline-configuration-file-for-the-maven-application">
<h3>Create a Pipeline Configuration File for the Maven Application<a class="headerlink" href="#create-a-pipeline-configuration-file-for-the-maven-application" title="Permalink to this headline">¶</a></h3>
<p>In the <code class="docutils literal notranslate"><span class="pre">jte-the-basics-app-maven</span></code> repository we just created, add a
<code class="docutils literal notranslate"><span class="pre">pipeline_config.groovy</span></code> file at the root that specifies you want to
load the <code class="docutils literal notranslate"><span class="pre">maven</span></code> library.</p>
<p><strong>pipeline_config.groovy</strong>:</p>
<div class="code groovy highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">libraries</span><span class="p">{</span>
    <span class="n">maven</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Since this application will inherit the global configurations defined in the
Governance Tier, we don’t have to duplicate the configuration of loading the
sonarqube library in the repo level pipeline configuration.</p>
</div>
</div>
<div class="section" id="create-a-pipeline-configuration-file-for-the-gradle-application">
<h3>Create a Pipeline Configuration File for the Gradle Application<a class="headerlink" href="#create-a-pipeline-configuration-file-for-the-gradle-application" title="Permalink to this headline">¶</a></h3>
<p>In the <code class="docutils literal notranslate"><span class="pre">jte-the-basics-app-gradle</span></code> repository we created earlier for the
Multibranch Project, add a <code class="docutils literal notranslate"><span class="pre">pipeline_config.groovy</span></code> file at the root that
specifies you want to load the <code class="docutils literal notranslate"><span class="pre">gradle</span></code> library.</p>
<p><strong>pipeline_config.groovy</strong>:</p>
<div class="code groovy highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">libraries</span><span class="p">{</span>
    <span class="n">gradle</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="create-a-github-organization-project">
<h2>Create a GitHub Organization Project<a class="headerlink" href="#create-a-github-organization-project" title="Permalink to this headline">¶</a></h2>
<p>We created a <code class="docutils literal notranslate"><span class="pre">Multibranch</span> <span class="pre">Project</span></code> that automatically created jobs for every branch and
Pull Request in a repository.</p>
<p>Now, we’ll create a <code class="docutils literal notranslate"><span class="pre">GitHub</span> <span class="pre">Organization</span> <span class="pre">Project</span></code> that can automatically create <code class="docutils literal notranslate"><span class="pre">Multibranch</span> <span class="pre">Projects</span></code>
for every repository within a GitHub Organization.</p>
<ol class="arabic simple">
<li>From the Jenkins home page, select <code class="docutils literal notranslate"><span class="pre">New</span> <span class="pre">Item</span></code> in the lefthand navigation menu</li>
<li>Select a name for the job.</li>
<li>Select <code class="docutils literal notranslate"><span class="pre">GitHub</span> <span class="pre">Organization</span></code> the click <code class="docutils literal notranslate"><span class="pre">OK</span></code> at the bottom of the screen</li>
<li>Select the GitHub credential under the <code class="docutils literal notranslate"><span class="pre">Credentials</span></code> drop down menu</li>
<li>Enter your GitHub username under the <code class="docutils literal notranslate"><span class="pre">Owner</span></code> field</li>
<li>Under <code class="docutils literal notranslate"><span class="pre">Behaviors</span></code> click <code class="docutils literal notranslate"><span class="pre">Add</span></code> then under <code class="docutils literal notranslate"><span class="pre">Repositories</span></code> (not to be confused with <code class="docutils literal notranslate"><span class="pre">Within</span> <span class="pre">Repositories</span></code>), select <code class="docutils literal notranslate"><span class="pre">Filter</span> <span class="pre">by</span> <span class="pre">name</span> <span class="pre">(with</span> <span class="pre">wildcards)</span></code></li>
<li>Enter <code class="docutils literal notranslate"><span class="pre">jte-the-basics-app-*</span></code> in the <code class="docutils literal notranslate"><span class="pre">Include</span></code> text box (assuming you’ve following the naming recommendations of the application repositories)</li>
<li>Under <code class="docutils literal notranslate"><span class="pre">Project</span> <span class="pre">Recognizers</span></code> hit the red X to delete the <code class="docutils literal notranslate"><span class="pre">Pipeline</span> <span class="pre">Jenkinsfile</span></code> Recognizers</li>
<li>Under <code class="docutils literal notranslate"><span class="pre">Project</span> <span class="pre">Recognizers</span></code> select <code class="docutils literal notranslate"><span class="pre">Add</span></code> and click <code class="docutils literal notranslate"><span class="pre">Jenkins</span> <span class="pre">Templating</span> <span class="pre">Engine</span></code></li>
<li>Click <code class="docutils literal notranslate"><span class="pre">Save</span></code></li>
</ol>
<p>After creating the GitHub Organization job in Jenkins, you will be redirected to the logs of the GitHub Organization being
scanned to find repositories that match the wildcard format entered during job creation.  This will scope the repositories for
which jobs are created to just this lab’s application repositories.</p>
<p>Once scanning has finished, go view the GitHub Orgnization’s job page in Jenkins and you will see two Multibranch Projects
have been created for <code class="docutils literal notranslate"><span class="pre">example-jte-app-gradle</span></code> and <code class="docutils literal notranslate"><span class="pre">example-jte-app-maven</span></code>.</p>
<p>Explore each of these jobs to see that the <code class="docutils literal notranslate"><span class="pre">gradle</span></code> repository’s pipeline loaded the <code class="docutils literal notranslate"><span class="pre">gradle</span></code> library and the <code class="docutils literal notranslate"><span class="pre">maven</span></code>
repository loaded the <code class="docutils literal notranslate"><span class="pre">maven</span></code> library and both pipelines loaded the <code class="docutils literal notranslate"><span class="pre">sonarqube</span></code> library. Check the branch and PR views for each project, and notice the Stage View section which should indicate which library was loaded above each stage. Also, you can view the Console output for each build to see the </p>
<img alt="../../../_images/github_org.gif" class="align-center" src="../../../_images/github_org.gif" />
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">We just created a configuration where <strong>multiple</strong> applications used the <strong>same</strong> pipeline template,
shared a common configuration, but still have the flexibility to choose the correct build tool for
their application.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="8-summary.html" class="btn btn-neutral float-right" title="Summary" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="6-multibranch.html" class="btn btn-neutral float-left" title="Apply to a GitHub Repository" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Booz Allen Hamilton

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-144247959-1', 'auto');
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>
